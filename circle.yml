machine:
  ruby:
    version: 2.4.1

compile:
  override:
    - ./bin/rake build

test:
  pre:
    - git config --global user.email "sayhi@circleci.com"
    - git config --global user.name "Circle CI"
    - bundle exec overcommit --sign
    - bundle exec overcommit --run

deployment:
  production:
    branch: master
    commands:
      - ./bin/rake deploy -- -e production
  staging:
    branch: development
    commands:
      - ./bin/rake deploy -- -e staging
